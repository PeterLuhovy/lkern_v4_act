/*
 * ================================================================
 * FILE: Sidebar.module.css
 * PATH: /packages/ui-components/src/components/Sidebar/Sidebar.module.css
 * DESCRIPTION: Modern dark sidebar with floating submenu tooltips
 * VERSION: v3.7.0
 * UPDATED: 2025-12-09 00:00:00
 * CHANGES:
 *   - v3.7.0: Scrollbar uses --color-brand-primary (responds to palette configurator)
 *   - v3.6.0: Ultra fast 100ms animation + will-change GPU hint
 *   - v3.5.0: Synchronized all animations (width + opacity = 150ms, ease-out)
 *   - v3.4.0: Added visible scrollbar with purple brand color
 *   - v3.3.0: Super fast animation like DataGrid (150ms, ease-out)
 *   - v3.2.0: Faster, snappier animation (250ms, snappy easing)
 *   - v3.1.1: Improved animation smoothness - new --duration-sidebar token (350ms)
 *   - v3.1.0: Design token migration (Phase 2.3)
 *   - v3.0.0: Complete redesign - dark theme, floating submenu
 *   - v2.0.0: Vertical toggle button, tree navigation support
 *   - v1.0.0: Initial version
 * ================================================================
 */

/* ================================================================
 * SIDEBAR CONTAINER
 * ================================================================ */

.sidebar {
  /* Layout */
  position: fixed;
  top: 0;
  left: 0;
  bottom: 0;
  width: 240px;
  z-index: 900;

  /* Visual - Dark theme */
  --sidebar-bg: #1a1a1a;

  background: var(--sidebar-bg);
  border-right: 1px solid rgba(255, 255, 255, 0.1);

  /* Transition - ultra fast (100ms) with GPU acceleration hint */
  transition: width 100ms var(--ease-out);
  will-change: width;

  /* Content layout */
  display: flex;
  flex-direction: column;
  overflow: hidden;
  box-sizing: border-box;

  /* Space for DebugBar at top (48px height) */
  padding-top: 10px;
}

/* Disable transition during manual resize */
.sidebar--resizing {
  transition: none !important;
}

/* Collapsed state - only toggle button visible */
.sidebar--collapsed {
  width: 24px;
}

/* Hide all content when collapsed */
.sidebar--collapsed .sidebar__logo,
.sidebar--collapsed .sidebar__nav,
.sidebar--collapsed .sidebar__bottom {
  opacity: 0;
  pointer-events: none;
}

/* ================================================================
 * LOGO
 * ================================================================ */

.sidebar__logo {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: var(--spacing-lg) 0;
  margin-bottom: var(--spacing-md);
  margin-right: 24px; /* Space for toggle button */
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
  transition: opacity 100ms var(--ease-out);
}

.sidebar__logoIcon {
  width: 48px;
  height: 48px;
  border-radius: 50%;
  background: linear-gradient(135deg, var(--color-brand-primary) 0%, var(--color-brand-primary-dark) 100%);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 24px;
  box-shadow: var(--shadow-brand-glow);
  transition: transform var(--duration-modal) var(--ease-bounce);
  overflow: hidden;
}

.sidebar__logoImage {
  width: 80%; /* Reduced by 20% */
  height: 100%;
  object-fit: contain;
  padding: var(--spacing-xs);
}

.sidebar__logo:hover .sidebar__logoIcon {
  transform: scale(1.1);
}

/* ================================================================
 * VERTICAL TOGGLE BUTTON (Right edge, full height)
 * ================================================================ */

.sidebar__toggle {
  /* Layout - vertical strip on right edge */
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  width: 24px;

  /* Reset button styles */
  border: none;
  border-left: 1px solid rgba(255, 255, 255, 0.1);
  background: linear-gradient(180deg,
    color-mix(in srgb, var(--color-brand-primary) 15%, transparent) 0%,
    color-mix(in srgb, var(--color-brand-primary-dark) 15%, transparent) 100%
  );
  cursor: pointer;
  padding: 0;

  /* Visual */
  color: rgba(255, 255, 255, 0.6);
  display: flex;
  align-items: center;
  justify-content: center;

  /* Transition */
  transition: all var(--duration-state) var(--ease-smooth);
  box-sizing: border-box;
  z-index: 10;
}

.sidebar__toggle:hover {
  background: linear-gradient(180deg,
    color-mix(in srgb, var(--color-brand-primary) 30%, transparent) 0%,
    color-mix(in srgb, var(--color-brand-primary-dark) 30%, transparent) 100%
  );
  border-left-color: var(--color-brand-primary);
  width: 28px;
}

.sidebar__toggle:active {
  background: linear-gradient(180deg,
    color-mix(in srgb, var(--color-brand-primary) 40%, transparent) 0%,
    color-mix(in srgb, var(--color-brand-primary-dark) 40%, transparent) 100%
  );
}

.sidebar__toggleIcon {
  font-size: var(--font-size-sm);
  color: rgba(255, 255, 255, 0.6);
  transition: color var(--duration-state) var(--ease-smooth);
}

.sidebar__toggle:hover .sidebar__toggleIcon {
  color: var(--color-brand-primary);
  font-size: var(--font-size-md);
}

/* ================================================================
 * RESIZE HANDLE (Drag to resize)
 * ================================================================ */

.sidebar__resizeHandle {
  /* Layout - thin vertical strip on right edge (next to toggle button) */
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  width: 4px;
  cursor: ew-resize;
  z-index: 11; /* Above toggle button */

  /* Visual - invisible by default */
  background: transparent;
  transition: background var(--duration-hover) var(--ease-smooth);
}

.sidebar__resizeHandle:hover {
  background: color-mix(in srgb, var(--color-brand-primary) 40%, transparent);
}

.sidebar__resizeHandle:active {
  background: color-mix(in srgb, var(--color-brand-primary) 60%, transparent);
}

/* ================================================================
 * EXPAND/COLLAPSE ALL BUTTONS
 * ================================================================ */

.sidebar__expandCollapseButtons {
  display: flex;
  flex-direction: row;
  gap: var(--spacing-xs);
  padding: 0 0 var(--spacing-xs) 0;
  margin-bottom: var(--spacing-xs);
}

.sidebar__expandAllButton,
.sidebar__collapseAllButton {
  /* Reset button styles */
  border: none;
  background: rgba(255, 255, 255, 0.05);
  cursor: pointer;
  padding: 3px var(--spacing-xs); /* Increased by ~20% (1px -> 3px) */
  text-align: center;

  /* Layout */
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 2px;
  flex: 1;
  border-radius: var(--radius-sm);

  /* Text */
  color: rgba(255, 255, 255, 0.7);
  font-size: 9px; /* Increased by ~20% (8px -> 9px) */

  /* Transition */
  transition: all var(--duration-hover) var(--ease-smooth);
  box-sizing: border-box;
}

.sidebar__expandAllButton:hover,
.sidebar__collapseAllButton:hover {
  background: color-mix(in srgb, var(--color-brand-primary) 15%, transparent);
  color: rgba(255, 255, 255, 0.9);
  transform: translateY(-1px);
}

.sidebar__expandAllButton:active,
.sidebar__collapseAllButton:active {
  transform: translateY(0);
  background: color-mix(in srgb, var(--color-brand-primary) 25%, transparent);
}

/* ================================================================
 * NAVIGATION
 * ================================================================ */

.sidebar__nav {
  flex: 1;
  overflow-y: auto;
  overflow-x: hidden;
  padding: 0 var(--spacing-sm);
  margin-right: 24px; /* Space for toggle button */
  transition: opacity 100ms var(--ease-out);

  /* Always show scrollbar (Firefox) - uses brand color variable for theme responsiveness */
  scrollbar-width: thin;
  scrollbar-color: color-mix(in srgb, var(--color-brand-primary) 50%, transparent) rgba(255, 255, 255, 0.05);
}

.sidebar__navList {
  list-style: none;
  margin: 0;
  padding: 0;
  display: flex;
  flex-direction: column;
  gap: var(--spacing-xs);
  position: relative;
}

.sidebar__navItemWrapper {
  position: relative;
  width: 100%;
}

.sidebar__labelContainer {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  min-width: 0; /* Allow text truncation */
}

/* ================================================================
 * NAVIGATION ITEM
 * ================================================================ */

.sidebar__navItem {
  /* Reset button styles */
  width: 100%;
  border: none;
  background: transparent;
  cursor: pointer;
  text-align: left;
  text-decoration: none !important; /* Remove underline from links */

  /* Flexbox layout - icon | text */
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  padding: var(--spacing-sm);
  position: relative;
  border-radius: var(--radius-md);

  /* Text */
  color: rgba(255, 255, 255, 0.7);
  font-size: calc(var(--font-size-xs) * 1.2); /* Increased by 20% */

  /* Transition */
  transition: all var(--duration-state) var(--ease-smooth);
  box-sizing: border-box;
  overflow: hidden;
}

.sidebar__navItem:hover,
.sidebar__navItem:focus,
.sidebar__navItem:active {
  background: rgba(255, 255, 255, 0.05);
  color: rgba(255, 255, 255, 0.9);
  transform: translateX(2px);
  text-decoration: none !important;
}

/* Active state */
.sidebar__navItem--active {
  background: color-mix(in srgb, var(--color-brand-primary) 15%, transparent);
  color: var(--theme-button-text-on-color);
}

.sidebar__navItem--active:hover {
  transform: translateX(0);
}

/* Disabled state (no onClick handler) */
.sidebar__navItem--disabled {
  opacity: 0.4;
  cursor: not-allowed;
  pointer-events: none;
}

.sidebar__navItem--disabled:hover {
  background: transparent;
  transform: translateX(0);
}

/* Active indicator (left border) */
.sidebar__navItemIndicator {
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  width: 3px;
  background: linear-gradient(180deg,
    var(--color-brand-primary) 0%,
    var(--color-brand-primary-dark) 100%
  );
  border-radius: 0 var(--radius-sm) var(--radius-sm) 0;
  animation: indicatorSlideIn var(--duration-state) var(--ease-bounce);
}

@keyframes indicatorSlideIn {
  from {
    transform: scaleY(0);
    opacity: 0;
  }
  to {
    transform: scaleY(1);
    opacity: 1;
  }
}

/* Collapsed state - center icon */
.sidebar--collapsed .sidebar__navItem {
  justify-content: center;
  padding: var(--spacing-md) 0;
}

/* ================================================================
 * ICON
 * ================================================================ */

.sidebar__icon {
  font-size: 10px; /* Reduced from 20px (50%) */
  line-height: 1;
  flex-shrink: 0;
  width: 12px; /* Reduced from 24px (50%) */
  height: 12px; /* Reduced from 24px (50%) */
  display: flex;
  align-items: center;
  justify-content: center;
  transition: transform var(--duration-state) var(--ease-bounce);
}

.sidebar__navItem:hover .sidebar__icon {
  transform: scale(1.1);
}

/* ================================================================
 * LABEL
 * ================================================================ */

.sidebar__label {
  font-size: calc(var(--font-size-xs) * 1.2); /* Increased by 20% */
  font-weight: 500;
  line-height: 1.3;
  flex: 1;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  opacity: 1;
  transition: opacity var(--duration-modal) var(--ease-smooth);
}

.sidebar--collapsed .sidebar__label {
  opacity: 0;
  width: 0;
}

/* ================================================================
 * EXPAND ARROW
 * ================================================================ */

.sidebar__expandArrow {
  font-size: 10px;
  color: rgba(255, 255, 255, 0.5);
  margin-left: auto;
  flex-shrink: 0;
  width: 16px;
  height: 16px;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all var(--duration-state) var(--ease-bounce);
}

.sidebar__navItem:hover .sidebar__expandArrow {
  color: rgba(255, 255, 255, 0.8);
}

/* ================================================================
 * BADGE
 * ================================================================ */

.sidebar__badge {
  min-width: 20px;
  height: 20px;
  padding: 0 6px;
  border-radius: 10px;
  display: flex;
  align-items: center;
  justify-content: center;
  margin-left: auto;

  background: var(--color-status-error);
  color: var(--theme-button-text-on-color);
  font-size: 11px;
  font-weight: 700;
  box-shadow: 0 2px 4px rgba(244, 67, 54, 0.3);
  transition: transform var(--duration-state) var(--ease-bounce);
}

.sidebar__navItem:hover .sidebar__badge {
  transform: scale(1.1);
}

.sidebar--collapsed .sidebar__badge {
  position: absolute;
  top: 8px;
  right: 8px;
  min-width: 16px;
  height: 16px;
  padding: 0 4px;
  font-size: 9px;
}

/* ================================================================
 * FLOATING SUBMENU (Collapsed mode tooltip)
 * ================================================================ */

.sidebar__floatingSubmenu {
  position: absolute;
  left: calc(100% + 12px);
  top: 0;
  min-width: 200px;
  background: var(--sidebar-popover-bg);
  border-radius: var(--radius-md);
  box-shadow: var(--shadow-elevation-dark);
  z-index: 1000;
  animation: floatingSubmenuSlideIn var(--duration-state) var(--ease-bounce);
  border: 1px solid rgba(255, 255, 255, 0.1);
  overflow: hidden;
}

@keyframes floatingSubmenuSlideIn {
  from {
    opacity: 0;
    transform: translateX(-8px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

.sidebar__floatingSubmenuHeader {
  padding: var(--spacing-md) var(--spacing-lg);
  background: color-mix(in srgb, var(--color-brand-primary) 10%, transparent);
  color: rgba(255, 255, 255, 0.9);
  font-weight: 600;
  font-size: var(--font-size-sm);
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

.sidebar__floatingSubmenuList {
  list-style: none;
  margin: 0;
  padding: var(--spacing-xs) 0;
}

.sidebar__floatingSubmenuItem {
  width: 100%;
  border: none;
  background: transparent;
  cursor: pointer;
  padding: var(--spacing-sm) var(--spacing-lg);
  text-align: left;
  text-decoration: none; /* Remove underline from links */
  display: flex;
  align-items: center;
  gap: var(--spacing-md);
  color: rgba(255, 255, 255, 0.7);
  font-size: var(--font-size-sm);
  transition: all var(--duration-hover) var(--ease-smooth);
  box-sizing: border-box;
}

.sidebar__floatingSubmenuItem:hover,
.sidebar__floatingSubmenuItem:focus,
.sidebar__floatingSubmenuItem:active {
  background: rgba(255, 255, 255, 0.05);
  color: rgba(255, 255, 255, 0.9);
  text-decoration: none !important;
}

.sidebar__floatingSubmenuItem--active {
  background: color-mix(in srgb, var(--color-brand-primary) 20%, transparent);
  color: var(--theme-button-text-on-color);
}

/* ================================================================
 * INLINE SUBMENU (Expanded mode)
 * ================================================================ */

.sidebar__submenuList {
  list-style: none;
  margin: 0;
  padding: 0;
  padding-left: 20px; /* Reduced from 32px - smaller indentation for submenu items */
  padding-top: var(--spacing-sm); /* Top spacing for submenu */
  margin-top: var(--spacing-xs);
  animation: submenuSlideDown var(--duration-state) var(--ease-bounce);
  position: relative;
}

/* Tree structure line (vertical) */
.sidebar__submenuList::before {
  content: '';
  position: absolute;
  left: 10px; /* Centered under icon */
  top: 0;
  bottom: 8px;
  width: 2px;
  background: color-mix(in srgb, var(--color-brand-primary) 25%, transparent);
  border-radius: 2px;
}

/* Last item in submenu - vertical line only goes to center (50% height) */
.sidebar__submenuList .sidebar__navItemWrapper:last-child::after {
  content: '';
  position: absolute;
  left: -11px; /* Offset to align with submenuList::before (which is at 10px from submenuList, and wrapper is indented 20px) */
  top: 50%;
  bottom: 0;
  width: 4px; /* Wider to ensure full coverage */
  background: var(--sidebar-bg); /* Match sidebar background exactly */
  z-index: 1;
}

@keyframes submenuSlideDown {
  from {
    opacity: 0;
    transform: translateY(-8px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.sidebar__submenuItem {
  width: 100%;
  border: none;
  background: transparent;
  cursor: pointer;
  padding: var(--spacing-sm) var(--spacing-md);
  text-align: left;
  text-decoration: none; /* Remove underline from links */
  display: flex;
  align-items: center;
  gap: var(--spacing-md);
  color: rgba(255, 255, 255, 0.6);
  font-size: var(--font-size-sm);
  border-radius: var(--radius-sm);
  transition: all var(--duration-hover) var(--ease-smooth);
  box-sizing: border-box;
  margin-bottom: var(--spacing-xs);
  position: relative;
}

.sidebar__submenuItem:hover,
.sidebar__submenuItem:focus,
.sidebar__submenuItem:active {
  background: rgba(255, 255, 255, 0.05);
  color: rgba(255, 255, 255, 0.9);
  transform: translateX(2px);
  text-decoration: none !important;
}

.sidebar__submenuItem--active {
  background: color-mix(in srgb, var(--color-brand-primary) 15%, transparent);
  color: var(--theme-button-text-on-color);
}

/* ================================================================
 * BOTTOM SECTION
 * ================================================================ */

.sidebar__bottom {
  border-top: 1px solid rgba(255, 255, 255, 0.1);
  padding: var(--spacing-md);
  margin-right: 24px; /* Space for toggle button */
  display: flex;
  flex-direction: column;
  gap: var(--spacing-md);
  transition: opacity 100ms var(--ease-out);
}

/* Theme & Language toggles wrapper (horizontal layout) */
.sidebar__togglesWrapper {
  display: flex;
  flex-direction: row;
  gap: var(--spacing-xs);
}

/* Theme toggle buttons inside wrapper get flex: 1 */
.sidebar__togglesWrapper .sidebar__themeToggle {
  flex: 1;
  width: auto;
  justify-content: center;
}

/* Upload box */
.sidebar__uploadBox {
  background: rgba(255, 255, 255, 0.03);
  border: 2px dashed rgba(255, 255, 255, 0.2);
  border-radius: var(--radius-md);
  padding: var(--spacing-lg);
  display: flex;
  align-items: center;
  gap: var(--spacing-md);
  cursor: pointer;
  transition: all var(--duration-state) var(--ease-smooth);
}

.sidebar__uploadBox:hover {
  background: rgba(255, 255, 255, 0.05);
  border-color: color-mix(in srgb, var(--color-brand-primary) 50%, transparent);
}

.sidebar__uploadBoxIcon {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  background: color-mix(in srgb, var(--color-brand-primary) 20%, transparent);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 24px;
  color: var(--color-brand-primary);
  flex-shrink: 0;
}

.sidebar__uploadBoxText {
  flex: 1;
  color: rgba(255, 255, 255, 0.7);
  font-size: var(--font-size-sm);
}

.sidebar__uploadBoxSubtext {
  font-size: var(--font-size-xs);
  color: rgba(255, 255, 255, 0.5);
  margin-top: 4px;
}

/* Theme toggle */
.sidebar__themeToggle {
  width: 100%;
  border: none;
  background: rgba(255, 255, 255, 0.05);
  border-radius: var(--radius-md);
  padding: var(--spacing-sm);
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  color: rgba(255, 255, 255, 0.7);
  font-size: var(--font-size-sm);
  cursor: pointer;
  transition: all var(--duration-state) var(--ease-smooth);
  box-sizing: border-box;
}

.sidebar__themeToggle:hover {
  background: rgba(255, 255, 255, 0.1);
  color: rgba(255, 255, 255, 0.9);
}

.sidebar--collapsed .sidebar__themeToggle {
  justify-content: center;
}

/* Floating action button */
.sidebar__floatingAction {
  width: 56px;
  height: 56px;
  border-radius: 50%;
  border: none;
  background: linear-gradient(135deg,
    var(--color-brand-primary) 0%,
    var(--color-brand-primary-dark) 100%
  );
  color: var(--theme-button-text-on-color);
  font-size: 28px;
  font-weight: 300;
  cursor: pointer;
  box-shadow: 0 4px 12px color-mix(in srgb, var(--color-brand-primary) 40%, transparent);
  transition: all var(--duration-state) var(--ease-bounce);
  display: flex;
  align-items: center;
  justify-content: center;
  margin: 0 auto;
}

.sidebar__floatingAction:hover {
  transform: scale(1.1);
  box-shadow: 0 6px 16px color-mix(in srgb, var(--color-brand-primary) 50%, transparent);
}

.sidebar__floatingAction:active {
  transform: scale(0.95);
}

/* ================================================================
 * SCROLLBAR STYLING
 * ================================================================ */

.sidebar__nav::-webkit-scrollbar {
  width: 6px;
}

.sidebar__nav::-webkit-scrollbar-track {
  background: transparent;
}

.sidebar__nav::-webkit-scrollbar-thumb {
  background: color-mix(in srgb, var(--color-brand-primary) 50%, transparent);
  border-radius: 3px;
}

.sidebar__nav::-webkit-scrollbar-thumb:hover {
  background: color-mix(in srgb, var(--color-brand-primary) 70%, transparent);
}

/* ================================================================
 * LIGHT MODE OVERRIDES
 * ================================================================ */

[data-theme='light'] .sidebar {
  --sidebar-bg: #ffffff;
  background: var(--sidebar-bg);
  border-right-color: rgba(0, 0, 0, 0.1);
}

[data-theme='light'] .sidebar__logo {
  border-bottom-color: rgba(0, 0, 0, 0.1);
}

[data-theme='light'] .sidebar__toggle {
  background: linear-gradient(180deg,
    color-mix(in srgb, var(--color-brand-primary) 10%, transparent) 0%,
    color-mix(in srgb, var(--color-brand-primary-dark) 10%, transparent) 100%
  );
  border-left-color: rgba(0, 0, 0, 0.1);
}

[data-theme='light'] .sidebar__toggle:hover {
  background: linear-gradient(180deg,
    color-mix(in srgb, var(--color-brand-primary) 20%, transparent) 0%,
    color-mix(in srgb, var(--color-brand-primary-dark) 20%, transparent) 100%
  );
  border-left-color: var(--color-brand-primary);
}

[data-theme='light'] .sidebar__toggleIcon {
  color: rgba(0, 0, 0, 0.6);
}

[data-theme='light'] .sidebar__toggle:hover .sidebar__toggleIcon {
  color: var(--color-brand-primary);
}

[data-theme='light'] .sidebar__expandAllButton,
[data-theme='light'] .sidebar__collapseAllButton {
  background: rgba(0, 0, 0, 0.05);
  color: rgba(0, 0, 0, 0.7);
}

[data-theme='light'] .sidebar__expandAllButton:hover,
[data-theme='light'] .sidebar__collapseAllButton:hover {
  background: color-mix(in srgb, var(--color-brand-primary) 20%, transparent);
  color: rgba(0, 0, 0, 0.9);
}

[data-theme='light'] .sidebar__navItem {
  color: rgba(0, 0, 0, 0.7);
}

[data-theme='light'] .sidebar__navItem:hover {
  background: rgba(0, 0, 0, 0.05);
  color: rgba(0, 0, 0, 0.9);
}

[data-theme='light'] .sidebar__navItem--active {
  background: color-mix(in srgb, var(--color-brand-primary) 25%, transparent);
  color: #000000;
}

[data-theme='light'] .sidebar__floatingSubmenu {
  background: #ffffff;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
  border-color: rgba(0, 0, 0, 0.1);
}

[data-theme='light'] .sidebar__floatingSubmenuHeader {
  color: rgba(0, 0, 0, 0.9);
  border-bottom-color: rgba(0, 0, 0, 0.1);
}

[data-theme='light'] .sidebar__floatingSubmenuItem {
  color: rgba(0, 0, 0, 0.7);
}

[data-theme='light'] .sidebar__floatingSubmenuItem:hover {
  background: rgba(0, 0, 0, 0.05);
  color: rgba(0, 0, 0, 0.9);
}

[data-theme='light'] .sidebar__submenuItem {
  color: rgba(0, 0, 0, 0.6);
}

[data-theme='light'] .sidebar__submenuItem:hover {
  background: rgba(0, 0, 0, 0.05);
  color: rgba(0, 0, 0, 0.9);
}

[data-theme='light'] .sidebar__bottom {
  border-top-color: rgba(0, 0, 0, 0.1);
}

[data-theme='light'] .sidebar__uploadBox {
  background: rgba(0, 0, 0, 0.03);
  border-color: rgba(0, 0, 0, 0.2);
}

[data-theme='light'] .sidebar__uploadBox:hover {
  background: rgba(0, 0, 0, 0.05);
}

[data-theme='light'] .sidebar__uploadBoxText {
  color: rgba(0, 0, 0, 0.7);
}

[data-theme='light'] .sidebar__uploadBoxSubtext {
  color: rgba(0, 0, 0, 0.5);
}

[data-theme='light'] .sidebar__themeToggle {
  background: rgba(0, 0, 0, 0.05);
  color: rgba(0, 0, 0, 0.7);
}

[data-theme='light'] .sidebar__themeToggle:hover {
  background: rgba(0, 0, 0, 0.1);
  color: rgba(0, 0, 0, 0.9);
}

/* Light mode - expand arrow visibility */
[data-theme='light'] .sidebar__expandArrow {
  color: rgba(0, 0, 0, 0.5);
}

[data-theme='light'] .sidebar__navItem:hover .sidebar__expandArrow {
  color: rgba(0, 0, 0, 0.8);
}

/* Light mode - tree structure lines */
[data-theme='light'] .sidebar__submenuList::before {
  background: color-mix(in srgb, var(--color-brand-primary) 15%, transparent);
}

/* Light mode - last item half-height vertical line (inherits --sidebar-bg from parent) */

/* ================================================================
 * TAB SYSTEM (v4.0.0)
 * ================================================================ */

.sidebar__tabs {
  display: flex;
  flex-direction: row;
  gap: 2px;
  padding: 0 var(--spacing-xs);
  margin-bottom: var(--spacing-sm);
  margin-right: 24px; /* Space for toggle button */
  background: rgba(255, 255, 255, 0.03);
  border-radius: var(--radius-md);
  padding: 3px;
}

.sidebar__tabButton {
  flex: 1;
  border: none;
  background: transparent;
  cursor: pointer;
  padding: var(--spacing-xs) var(--spacing-sm);
  border-radius: var(--radius-sm);
  color: rgba(255, 255, 255, 0.5);
  font-size: 11px;
  font-weight: 500;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 4px;
  transition: all var(--duration-hover) var(--ease-smooth);
  box-sizing: border-box;
}

.sidebar__tabButton:hover {
  color: rgba(255, 255, 255, 0.8);
  background: rgba(255, 255, 255, 0.05);
}

.sidebar__tabButton--active {
  background: color-mix(in srgb, var(--color-brand-primary) 20%, transparent);
  color: rgba(255, 255, 255, 0.95);
}

.sidebar__tabButton--active:hover {
  background: color-mix(in srgb, var(--color-brand-primary) 25%, transparent);
}

.sidebar__tabIcon {
  font-size: 12px;
}

/* Hide tabs in collapsed mode */
.sidebar--collapsed .sidebar__tabs {
  opacity: 0;
  pointer-events: none;
}

/* Tab content containers */
.sidebar__tabContent {
  display: none;
  flex: 1;
  overflow-y: auto;
  overflow-x: hidden;
}

.sidebar__tabContent--active {
  display: flex;
  flex-direction: column;
}

/* ================================================================
 * ANALYTICS PANEL (Tab 3)
 * ================================================================ */

.sidebar__analyticsPanel {
  padding: var(--spacing-sm);
  margin-right: 24px; /* Space for toggle button */
  display: flex;
  flex-direction: column;
  gap: var(--spacing-md);
}

.sidebar__analyticsSection {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-xs);
}

.sidebar__analyticsSectionTitle {
  font-size: 10px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: rgba(255, 255, 255, 0.5);
  margin-bottom: var(--spacing-xs);
}

.sidebar__analyticsDivider {
  height: 1px;
  background: rgba(255, 255, 255, 0.1);
  margin: var(--spacing-sm) 0;
}

[data-theme='light'] .sidebar__analyticsDivider {
  background: rgba(0, 0, 0, 0.1);
}

.sidebar__analyticsToggle {
  display: flex;
  align-items: center;
  gap: var(--spacing-xs);
  padding: var(--spacing-xs) var(--spacing-sm);
  background: rgba(255, 255, 255, 0.03);
  border-radius: var(--radius-sm);
  transition: all var(--duration-hover) var(--ease-smooth);
}

.sidebar__analyticsToggle:hover {
  background: rgba(255, 255, 255, 0.08);
}

.sidebar__analyticsToggleClickable {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  flex: 1;
  cursor: pointer;
}

/* InfoHint icon in analytics toggle - prevent grow/shrink */
.sidebar__analyticsToggle > div:last-child {
  flex-shrink: 0;
  width: 16px;
  height: 16px;
}

.sidebar__analyticsCheckbox {
  width: 16px;
  height: 16px;
  border-radius: 4px;
  border: 2px solid rgba(255, 255, 255, 0.3);
  background: transparent;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all var(--duration-hover) var(--ease-smooth);
  flex-shrink: 0;
}

.sidebar__analyticsCheckbox--checked {
  background: var(--color-brand-primary);
  border-color: var(--color-brand-primary);
}

.sidebar__analyticsCheckmark {
  font-size: 10px;
  color: var(--theme-button-text-on-color);
}

.sidebar__analyticsLabel {
  font-size: 12px;
  color: rgba(255, 255, 255, 0.8);
  flex: 1;
}

.sidebar__analyticsDescription {
  font-size: 10px;
  color: rgba(255, 255, 255, 0.4);
}

/* Analytics action buttons */
.sidebar__analyticsActions {
  display: flex;
  gap: var(--spacing-xs);
  margin-top: var(--spacing-sm);
}

.sidebar__analyticsActionBtn {
  flex: 1;
  border: none;
  background: rgba(255, 255, 255, 0.05);
  cursor: pointer;
  padding: var(--spacing-xs) var(--spacing-sm);
  border-radius: var(--radius-sm);
  color: rgba(255, 255, 255, 0.7);
  font-size: 10px;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 4px;
  transition: all var(--duration-hover) var(--ease-smooth);
}

.sidebar__analyticsActionBtn:hover {
  background: rgba(255, 255, 255, 0.1);
  color: rgba(255, 255, 255, 0.9);
}

.sidebar__analyticsActionBtn--enable {
  background: color-mix(in srgb, var(--color-status-success) 15%, transparent);
  color: var(--color-status-success);
}

.sidebar__analyticsActionBtn--enable:hover {
  background: color-mix(in srgb, var(--color-status-success) 25%, transparent);
}

.sidebar__analyticsActionBtn--disable {
  background: color-mix(in srgb, var(--color-status-error) 15%, transparent);
  color: var(--color-status-error);
}

.sidebar__analyticsActionBtn--disable:hover {
  background: color-mix(in srgb, var(--color-status-error) 25%, transparent);
}

/* ================================================================
 * LIGHT MODE - TABS & ANALYTICS
 * ================================================================ */

[data-theme='light'] .sidebar__tabs {
  background: rgba(0, 0, 0, 0.03);
}

[data-theme='light'] .sidebar__tabButton {
  color: rgba(0, 0, 0, 0.5);
}

[data-theme='light'] .sidebar__tabButton:hover {
  color: rgba(0, 0, 0, 0.8);
  background: rgba(0, 0, 0, 0.05);
}

[data-theme='light'] .sidebar__tabButton--active {
  color: rgba(0, 0, 0, 0.95);
}

[data-theme='light'] .sidebar__analyticsSectionTitle {
  color: rgba(0, 0, 0, 0.5);
}

[data-theme='light'] .sidebar__analyticsToggle {
  background: rgba(0, 0, 0, 0.03);
}

[data-theme='light'] .sidebar__analyticsToggle:hover {
  background: rgba(0, 0, 0, 0.08);
}

[data-theme='light'] .sidebar__analyticsCheckbox {
  border-color: rgba(0, 0, 0, 0.3);
}

[data-theme='light'] .sidebar__analyticsLabel {
  color: rgba(0, 0, 0, 0.8);
}

[data-theme='light'] .sidebar__analyticsDescription {
  color: rgba(0, 0, 0, 0.4);
}

[data-theme='light'] .sidebar__analyticsActionBtn {
  background: rgba(0, 0, 0, 0.05);
  color: rgba(0, 0, 0, 0.7);
}

[data-theme='light'] .sidebar__analyticsActionBtn:hover {
  background: rgba(0, 0, 0, 0.1);
  color: rgba(0, 0, 0, 0.9);
}

/* ============================================================
   USER SETTINGS - Export Behavior Select
   ============================================================ */

.sidebar__select {
  width: 100%;
  padding: var(--spacing-xs) var(--spacing-sm);
  margin-top: var(--spacing-xs);
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: var(--radius-sm);
  color: rgba(255, 255, 255, 0.9);
  font-size: 12px;
  cursor: pointer;
  transition: all var(--duration-hover) var(--ease-smooth);
}

.sidebar__select:hover {
  background: rgba(255, 255, 255, 0.08);
  border-color: rgba(255, 255, 255, 0.2);
}

.sidebar__select:focus {
  outline: none;
  border-color: var(--color-brand-primary);
  background: rgba(255, 255, 255, 0.1);
}

.sidebar__select option {
  background: var(--color-neutral-gray800);
  color: rgba(255, 255, 255, 0.9);
}

.sidebar__hint {
  font-size: 10px;
  color: rgba(255, 255, 255, 0.5);
  margin-top: var(--spacing-xs);
  line-height: 1.4;
}

/* Light theme overrides */
[data-theme='light'] .sidebar__select {
  background: rgba(0, 0, 0, 0.03);
  border-color: rgba(0, 0, 0, 0.1);
  color: rgba(0, 0, 0, 0.9);
}

[data-theme='light'] .sidebar__select:hover {
  background: rgba(0, 0, 0, 0.05);
  border-color: rgba(0, 0, 0, 0.2);
}

[data-theme='light'] .sidebar__select:focus {
  background: rgba(0, 0, 0, 0.08);
}

[data-theme='light'] .sidebar__select option {
  background: white;
  color: rgba(0, 0, 0, 0.9);
}

[data-theme='light'] .sidebar__hint {
  color: rgba(0, 0, 0, 0.5);
}